#!/bin/sh

# Only run validation on main branch
current_branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$current_branch" = "main" ]; then
    echo "ğŸ” Running pre-push validation on main branch..."
    
    # Run full validation before push
    if ! pnpm run validate; then
        echo "âŒ Pre-push validation failed. Push aborted."
        exit 1
    fi
    
    echo "âœ… Pre-push validation passed!"
else
    echo "âš ï¸  Skipping pre-push validation (not on main branch)"
fiecho "ğŸ” Running pre-push validation..."

# Run full validation before push
if ! pnpm run validate; then
    echo "âŒ Pre-push validation failed. Push aborted."
    exit 1
fi

echo "âœ… Pre-push validation passed. Proceeding with push..."
